<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Form Validation (Focusout)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <style>
    .error { color: red; font-size: 14px; }
    .success { color: green; font-size: 14px; }
    input { display: block; margin-bottom: 8px; padding: 5px; }
  </style>
</head>
<body class="container">
  <h2 class="text-center">Form Validation (on focusout)</h2>
  
  <form id="myForm" class="mt-5 border border-dark p-5">

    <div id="message" class="alert alert-danger d-none">
    </div>


    <label for="email" class="form-label">Email:</label>
    <input type="text" id="email" class="form-control">
    <span id="emailError" class="error mt-2"></span><br>

    <label for="Username" class="form-label">Username:</label>
    <input type="text" id="username" class="form-control">
    <span id="usernameError" class="error mt-2" ></span><br>

    <label class="form-label">DOB:</label>
    <input type="date" id="dob" class="form-control">
    <span id="dobError" class="error mt-2"></span><br>

    <label class="form-label">Phone:</label>
    <input type="number" id="phone" class="form-control">
    <span id="phoneError" class="error mt-2"></span><br>
    
    <label class="form-label">Password:</label>
    <input type="password" id="password" class="form-control">
    <span id="passError" class="error mt-2"></span><br>
    
    <label class="form-label">Confirm Password:</label>
    <input type="password" id="confirmPassword" class="form-control">
    <span id="confirmError" class="error mt-2"></span>
    <br>
    <div class="text-center">
    <button type="submit" id="submit" class="btn btn-primary mt-3 w-25">Submit</button>

    </div>
  </form>

  <script>
    const email = document.getElementById("email");
    const username = document.getElementById("username");
    const dob = document.getElementById("dob");
    const phone = document.getElementById("phone");
    const password = document.getElementById("password");
    const confirmPassword = document.getElementById("confirmPassword");
    const form = document.getElementById("myForm");
    const button = document.querySelector("#submit");

    email.addEventListener("focusout", () => {
      const pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (email.value === "") {
        document.getElementById("emailError").textContent = "Email is required";
      } else if (!pattern.test(email.value)) {
        document.getElementById("emailError").textContent = "Invalid email format";
      } else {
        document.getElementById("emailError").textContent = "✔ Valid email";
      }
    });

    username.addEventListener("focusout", () => {
      if (username.value === "") {
        document.getElementById("usernameError").textContent = "Username is required";
      } else if (username.value.length < 6) {
        document.getElementById("usernameError").textContent = "Username must be at least 6 characters";
      } else {
        document.getElementById("usernameError").textContent = "✔ Valid username";
      }
    });

    dob.addEventListener("focusout", () => {
      if (dob.value === "") {
        document.getElementById("dobError").textContent = "DOB is required";
      } else if (new Date(dob.value) > new Date()) {
        document.getElementById("dobError").textContent = "Invalid DOB";
      } else {
        document.getElementById("dobError").textContent = "✔ Valid DOB";
      }
    });

    phone.addEventListener("focusout", () => {
      if (phone.value === "") {
        document.getElementById("phoneError").textContent = "Phone number is required";
      } else if (phone.value.length !== 10) {
        document.getElementById("phoneError").textContent = "Invalid phone number";
      } else {
        document.getElementById("phoneError").textContent = "✔ Valid phone number";
      }
    });

    password.addEventListener("focusout", () => {
      if (password.value === "") {
        document.getElementById("passError").textContent = "Password is required";
      } else if (password.value.length < 6) {
        document.getElementById("passError").textContent = "Password must be at least 6 characters";
      } else {
        document.getElementById("passError").textContent = "✔ Strong password";
      }
    });

    confirmPassword.addEventListener("focusout", () => {
      if (confirmPassword.value === "") {
        document.getElementById("confirmError").textContent = "Confirm password is required";
      } else if (confirmPassword.value !== password.value) {
        document.getElementById("confirmError").textContent = "Passwords do not match";
      } else {
        document.getElementById("confirmError").textContent = "✔ Passwords match";
      }
    });

    button.addEventListener("click", () => {
      document.getElementById("message").classList.remove("d-none");
      if (email.value === "" || username.value === "" || dob.value === "" || phone.value === "" || password.value === "" || confirmPassword.value === "") {
        document.getElementById("message").textContent = "Please fill in all the fields";
      }
    })

  </script>
</body>
</html>
